<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Using Oracle Cloud Free tier | Home</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="The problem This week I have been searching for solutions to use domains with my applications running in containers in my MacBook Pro server. Yes, I have converted my MacBook Pro into a server, at least for now. The first solution was to use a Pi-Hole as a local DNS and it works fine, but the problem is that I have to specify ports to get into the applications and it gets annonying.">
    <meta name="generator" content="Hugo 0.124.1">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      
<link rel="shortcut icon" href="/favicons/favicon-32x32.png" type="image/x-icon" />


    

    

    
      <link rel="canonical" href="http://localhost:1313/oracle_cloud_free_tier/">
    

    <meta property="og:title" content="Using Oracle Cloud Free tier" />
<meta property="og:description" content="The problem This week I have been searching for solutions to use domains with my applications running in containers in my MacBook Pro server. Yes, I have converted my MacBook Pro into a server, at least for now. The first solution was to use a Pi-Hole as a local DNS and it works fine, but the problem is that I have to specify ports to get into the applications and it gets annonying." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/oracle_cloud_free_tier/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-24T22:33:19-03:00" />
<meta property="article:modified_time" content="2024-04-24T22:33:19-03:00" />
<meta itemprop="name" content="Using Oracle Cloud Free tier">
<meta itemprop="description" content="The problem This week I have been searching for solutions to use domains with my applications running in containers in my MacBook Pro server. Yes, I have converted my MacBook Pro into a server, at least for now. The first solution was to use a Pi-Hole as a local DNS and it works fine, but the problem is that I have to specify ports to get into the applications and it gets annonying."><meta itemprop="datePublished" content="2024-04-24T22:33:19-03:00" />
<meta itemprop="dateModified" content="2024-04-24T22:33:19-03:00" />
<meta itemprop="wordCount" content="1043">
<meta itemprop="keywords" content="linux,oracle,cloud,web,vps,nginx,tailscale,docker," /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Using Oracle Cloud Free tier"/>
<meta name="twitter:description" content="The problem This week I have been searching for solutions to use domains with my applications running in containers in my MacBook Pro server. Yes, I have converted my MacBook Pro into a server, at least for now. The first solution was to use a Pi-Hole as a local DNS and it works fine, but the problem is that I have to specify ports to get into the applications and it gets annonying."/>

	
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
  <link rel="manifest" href="/favicons/site.webmanifest">
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  <header>
  <div class="bg-black">
    <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Home
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Blog page">
              Blog
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact/" title="Contact me page">
              Contact me
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
    
    <a href="https://github.com/isfttr" target="_blank" rel="noopener" class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>

    </div>
  </div>
</nav>

  </div>
</header>


    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Blog
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Using Oracle Cloud Free tier</h1>
      
      <p class="tracked">
        By <strong>Lucas F. Aguiar</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-04-24T22:33:19-03:00">April 24, 2024</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id="the-problem">The problem</h2>
<p>This week I have been searching for solutions to use domains with my applications running in containers in my MacBook Pro server. Yes, I have converted my MacBook Pro into a server, at least for now. The first solution was to use a Pi-Hole as a local DNS and it works fine, but the problem is that I have to specify ports to get into the applications and it gets annonying. The solution seemed simple enough, create a Nginx Proxy Manager (NPM) container, use it to point to the containers in the local network and this should solve the issue. Well, that&rsquo;s what I thought.</p>
<p>This sent me in a three-day hunt for a solution because everything I did was not able to make NPM direct the traffic correctly. Eventually I pinned down that the problema was with my ISP and possibly the default CG-NAT configuration. So, this text is for the reader that tried the following and it did not work.</p>
<h2 id="port-forwarding-in-the-router">Port Forwarding in the Router</h2>
<p>This seemed the solution at first. Just configure the incoming traffic from ports 80 and 443 to be forwarded to the related ports in the NPM container, and then the NPM would distribute the traffic accordingly. But that did not work.</p>
<h2 id="dmz-for-the-host-running-npm">DMZ for the host running NPM</h2>
<p>This is another possible solution that I also tried and didn&rsquo;t work. I saw this one somewhere, with a user explaining that using the DMZ was essentially the same as forwarding ports for this specific host. I tried and it did not work.</p>
<h2 id="set-up-domains-and-ip-addresses">Set up domains and IP addresses</h2>
<p>I thought that the main problem could be the fact that I was using a subdomain where the main domain was pointing to other servers and because of this it wasn&rsquo;t able to get to the correct host. So I did set up another domain (cheap) to test this hypothesis and it did not work either.</p>
<h2 id="cloud-vps">Cloud VPS</h2>
<p>Eventually I arrived at this video by <a href="https://www.youtube.com/watch?v=2fA6u9eahNw&t=562s&pp=ygUScmFpZCBvd2wgY2xvdWQgdnBz">Raid Owl</a> on YouTube that opened my eyes to the ultimate solution for this problem. You see, I could have called to the ISP and check with them what was going on and if they could check if they could arrange something on their side, but well, this is tiresome. Instead, this solution seemed obvious after so much trying and error. The ISP is blocking incoming connections to the network, I don&rsquo;t know how. I couldn&rsquo;t figure it out. Cloudflare was giving a 522 error, which basically means that there was no response from the server. The server was getting no traffic. So it means that from the normal network setup I could not get this to work.</p>
<p>The Raid Owl proposed solution is to use a Cloud VPS as a way to get access to another public address, outside my local network, and then tunnel the traffic from this Cloud VPS to the host machine running containers in my local network. The solution on its face seems to work, but there are potential costs envolved. As I have some experience with Azure, I knew that I couldn&rsquo;t run a virtual machine there 24/7 for this purpose, maybe I would need to autostart and shutdown the machines everyday&hellip; After some research I&rsquo;ve found the perfect solution for this problem: Oracle Cloud.</p>
<h2 id="oracle-cloud-free-tier">Oracle Cloud Free Tier</h2>
<p>Oracle Cloud Free Tier is a way to get access to virtual machines with Linux which are always free to use. For this specific use it is perfect, since the amount of traffic is limited.</p>
<p>The setup is straight forward, and since Raid Owl does a perfect job at explaining all the steps for this I am going to be brief.</p>
<p>First, after creating a instance in Oracle Cloud, you need to forward the ports 80, 81 and 443. Those are the ports that need to be open for the traffic to reach the NPM container. After setting this up, go to the instance, and install Docker and all the other related packages, such as Docker Compose. For the specifics on these steps, I&rsquo;m leaving the links in the references. Also, setup Tailscale inside the instance (also in the links below). Then, after everything is setup, what you want to have is a Tailscale connection inside this new instance. The Tailscale connection will give access to the host machine inside you local network because that machine will also be running a tailscale daemon.</p>
<p>NPM will be setup as the reverse proxy of your local network while it is physically at a Oracle datacenter somewhere. All the incoming traffic which is directed at the public address for this instace at Oracle Cloud, will be piped to NPM, which will have proxies for services that are running inside your local network. Since tailscale is inside this Oracle instance, it will the configured to <code>--accept-routes</code>, which means that it will receive the incoming traffic and send to whatever in the network that is <code>--advertise-routes=&lt;ip-adress&gt;</code>. All this traffic will be sent using the you tailnet to you local network. In my case, I decided to use a Tailscaled container as the host for advertising the routes to specific subnets.</p>
<p>This is an overview of this problem and how I solved it. That are many little steps to get it going, but if you want to test your skills or just don&rsquo;t want to see with the ISP if this is their problem, you can use this strategy.</p>
<h2 id="reference-links">Reference links</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=GarMdDTAZJo&t=10s&pp=ygUMcmFpZCBvd2wgdnBz">Raid Owl: setting up NPM in local network and SSL certificates</a></li>
<li><a href="https://www.youtube.com/watch?v=yWVD6qmQrb8">Tony Teaches Tech: setting up instances and port forwarding in Oracle Cloud</a></li>
<li><a href="https://www.youtube.com/watch?v=bFZurhL14LA">Fabricio Veronez: Nginx reverse proxy and how it works (PT-BR)</a></li>
<li><a href="https://www.youtube.com/watch?v=SELkrrexIkQ&t=4s">Sauber Lab: How to get SSL certificates with NPM (PT-BR)</a></li>
<li><a href="https://dev.to/kylejschwartz/install-docker-compose-on-oracle-linux-8-1kb0">Dev.to: Install Docker and Docker Compose on Oracle Linux 8</a></li>
<li><a href="https://nginxproxymanager.com/setup/#using-mysql-mariadb-database">Nginx Proxy Manager: default configurations with Docker Compose</a></li>
<li><a href="https://tailscale.com/learn/ssh-into-docker-container">Tailscale SSH into containers</a></li>
<li><a href="https://tailscale.com/kb/1117/install-oracle-linux-8">Tailscale on Oracle Linux 8</a></li>
<li><a href="https://tailscale.com/kb/1019/subnets">Tailscale subnet routers</a></li>
<li><a href="https://www.oracle.com/br/cloud/sign-in.html">Oracle Cloud</a></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>I hope this article was useful to some of you who are trying to expose some internal application to external traffic but can&rsquo;t do it because of some ISP configurations.</p>
<hr>
<p>You can reach out to contact me about this and other topics at my email <strong><a href="mailto:lucas.fernandes.df@gmail.com">lucas.fernandes.df@gmail.com</a></strong> or by filling the form below.</p>



<form
  action="https://formspree.io/f/xgeglgop"
  method="POST"
>
  <label>
    Your email:
    <input type="email" name="email">
  </label>
  <label>
    Your message:
    <textarea name="message"></textarea>
  </label>
  
  <button type="submit">Send</button>
</form>

<style>
   
  form {
    display: grid;
    grid-template-columns: max-content 1fr;
    grid-gap: 1rem;
    text-align: left;
    padding: 2rem 0;
    margin: 0;
  }
  form label {
    display: contents;
  }
  form input[type="email"],
  form textarea,
  form button {
    font-family: inherit;
    font-size: inherit;
    border: 1px solid currentColor;
    background: none;
    padding: 0.4rem 0.5rem;
  }
  form textarea {
    resize: vertical;
  }
  form button {
    justify-self: start;
  }
</style>

<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/linux/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Linux</a>
   </li>
  
   <li class="list di">
     <a href="/tags/oracle/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Oracle</a>
   </li>
  
   <li class="list di">
     <a href="/tags/cloud/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Cloud</a>
   </li>
  
   <li class="list di">
     <a href="/tags/web/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Web</a>
   </li>
  
   <li class="list di">
     <a href="/tags/vps/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Vps</a>
   </li>
  
   <li class="list di">
     <a href="/tags/nginx/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Nginx</a>
   </li>
  
   <li class="list di">
     <a href="/tags/tailscale/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Tailscale</a>
   </li>
  
   <li class="list di">
     <a href="/tags/docker/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Docker</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog-introduction/">Introduction to my new space on the internet</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/macbook-pro-10years/">10 years using the MacBook Pro 9,2</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy; Lucas F. Aguiar 2023 - 2024. All rights reserved.
  </a>
    <div>
<div class="ananke-socials">
  
    
    <a href="https://github.com/isfttr" target="_blank" rel="noopener" class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
